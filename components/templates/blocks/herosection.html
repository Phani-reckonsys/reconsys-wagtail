{%load wagtailimages_tags%}

<!-- Herosection starts -->
<section>
  <div class="sidebar">
    <h5 class="t-15">{{self.sidetitle}}</h5>
  </div>
  <div class="herosection-wrapper pl-54 pr-54 w-container">
    <!-- Herosection Starts -->
    <div class="row herosection">
      <div class="herosection-content">
        <div class="category-heading">
          {% for herosection in self.titles %}
          <h4 class="mb-22 lh-110">{{herosection.value.title}}</h4>
          {% endfor %}
        </div>
        <div class="main-heading">
          {% for herosection in self.titles %}
            {% if self.include_fullimage %}
              <h1 class="mb-36 hero w-80">{{herosection.value.subtitle}}</h1>
            {% else %}
              <h1 class="mb-36 hero">{{herosection.value.subtitle}}</h1>
            {% endif %}
          {% endfor %}
        </div>
        {% for button in self.primary_button  %}
            {{button}}
        {% endfor %}
        <div class="hero-carousel-indicator-group">
        {% if self.titles|length != 1 %}
            
            {% for herosection in self.titles %}
            <div></div>
            {% endfor %}
           
        {% endif %}
         </div>
      </div>
      <div class="geometric-shapes">
      {% if self.include_fullimage %}
        {% image self.image_cover max-3000x1500 class="geometric-connection custom-hero-fullimage"%}
      {% else %}
        {% image self.image_cover max-3000x1500 class="geometric-connection"%}
        {% image self.image_decor max-3000x1500 class="geometric-wave"%}
      {% endif %}
      </div>
    </div>
    <!-- Herosection Ends -->
    {% if self.include_companies %}
        <!-- Quick testimonials Starts-->
    <div class="quick-testimonials">
      <h5 class="lh-110">Trusted by Global Enterprises</h5>
      <div class="client-logos-wrapper">
        <div class="client-logos">
         {% for logo in self.company_image %}
            {% image logo.value.image max-3000x1500 %}
         {% endfor %} 
        </div>
      </div>
    </div>
    <!-- quick testimonials ends -->
    {% endif %}
  </div>
</section>
<!-- Herosection Ends -->

<script>
  let herosectionTitleCount = {{self.titles | length}};
  const categoryHeadings = document.querySelectorAll(
      ".herosection .category-heading > *"
    );
    const mainHeadings = document.querySelectorAll(
      ".herosection .main-heading > *"
    );
    const headingIndicator = document.querySelectorAll(
      ".hero-carousel-indicator-group > *"
    );

    let currentHeading = 0;

    const setActiveHeading = (index) => {
      currentHeading = (index + herosectionTitleCount) % herosectionTitleCount;
      categoryHeadings.forEach((entry) => entry.classList.remove("active"));
      mainHeadings.forEach((entry) => entry.classList.remove("active"));
      headingIndicator.forEach((entry) => entry.classList.remove("active"));

      categoryHeadings[currentHeading].classList.add("active");
      mainHeadings[currentHeading].classList.add("active");
      headingIndicator[currentHeading].classList.add("active");
    };

    setInterval(() => setActiveHeading(currentHeading + 1), 7000);

    setActiveHeading(currentHeading);
</script>
